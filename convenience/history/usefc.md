# 使用fc

`fc` 是 `zsh` 的内建命令，能够让你查看、编辑、执行历史命令。

`fc` 有两种形式。

### 第一种形式

第一种形式可以让你灵活的选择历史命令，然后显示它们，或夹在他们来编辑或执行。

这种形式的语法如下：

> fc [-e EDITOR] \[OPTIONS] \[old = new ...] \[first  \[last]]
>
> 你可以使用负数来指定一个相对于当前命令行的事件。
>
> 默认：
>
> EDITOR NAME:
>
> 要使用的编辑器在EDITOR_NAME参数中指定。如果 EDITOR_NAME 没有指定，这个值是 shell 的参数 FCEDIT。
>
> first 和 last ：
>
> 你可以使用负数来指定一个相对于当前命令行的事件。若没有明确的值集合，first 默认为 ‘-1’（最近的命令），last 默认为 first 的值。
>
> 但是，如果只使用-1标志打印命令，first 默认为 “-16” 并且 last 默认为 “-1”。（打印最近的16个命令）

这会从 `first` 和 `last` 之间选择命令。

`first` 和 `last` 可以是数字和字符串。数字指的是事件的值。字符串指定最近的由字符串开始的命令。

在赋值 `first` 和 `last` 之后，你指定的替换器`（old=new）`会在命令中替换。所有出现的 `old` 都会被 `new` 替换。

- 第一种形式的参数

有时候，你只是想显示历史命令；你并不想编辑或者重新运行。通过 -l 选项，被选择的命令只是简单的显示；没有其他事情发生。（和输入 `history` 效果相同）

通过 `-l` ， `fc` 会在每个命令前面打印命令的数字。如果不想显示这些数字，可以使用 `-n` 参数。

有一些其他的标志和 `-l` 一起使用。要显示选择命令的时间戳，使用 `-d`。如果你想要完整格式的时间戳，使用 -f 代替 `-d`。如果你不喜欢默认的时间戳格式。使用 `-E`，或者 `-i` 。 要显示命令之间的事件，使用 `-D`。

使用 `-m` 和 `-l`， 你可以指定一个模式。（不要忘记用引号）然后，只有符合模式的命令会被显示。

- 进入编辑器

对于第一种形式的任何其他参数，你需要进入编辑器。编辑器预先加载了一个只包含你在命令行指定的历史事件的文件。（每行一个历史事件）

编辑器的**关键思想**是，当你编辑完文件以后，文件内的所有命令都会被执行。

另一个方便的参数是 `-r`，无论是列出还是编辑。他将所选命令的顺序反转。

### `fc` 的第二种形式

语法：

> fc -ARWI [ filename ]

- `-R` 会通过给定的文件读取历史记录
- `-W` 会写入历史命令到文件中
- `-A` 会增加历史命令到指定文件中
- 添加 `-I` 选项只会导致自上次增量追加后新增的事件 

在所有以上情况下，历史文件条目不会超过 `$SAVEHIST` 指定的数目。